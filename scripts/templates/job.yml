runs-on: ubuntu-latest
needs: prepare
strategy:
  matrix:
    node-version: [14.x]
steps:
  - name: 'Checkout ðŸ§ž'
    uses: actions/checkout@v2
  - name: Install Dependencies
    if: steps.node-cache.outputs.cache-hit != 'true'
    run: |
      npm install
      npx tsc
      mkdir temp
  - name: 'Process w/ Name Entity Recognition ðŸ¤–'
    run: |
      mkdir temp/podcasts_palettes_ner-
      node --max-old-space-size=6144 out/lib/ner.js
  - name: Cache Output of the Job
    id: podcasts_palettes_ner-
    uses: actions/cache@v2
    with:
      path: temp/podcasts_palettes_ner-
      key: podcasts_palettes_ner-
  - name: commit & Push changes ðŸ’¾
    uses: actions-js/push@master
    with:
      github_token: ${{ secrets.GITHUB_TOKEN }}
    run: |
      # Stage the file, commit and push
      git add temp/podcasts_palettes_ner-
      git commit -m "updated podcast group-
      git push origin dist
